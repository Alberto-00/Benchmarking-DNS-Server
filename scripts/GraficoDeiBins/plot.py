import matplotlib.pyplot as plt
import sys
import numpy as np
#arg: nomeFileDeiCount nomeFileDelleLatenze titoloGrafico nomeImg
# Set the figure size
plt.rcParams["figure.figsize"] = [30.00, 10]
plt.rcParams["figure.autolayout"] = True

with open(sys.argv[1],'r') as file:
	content = file.read().replace('  ,', ',')
	numbers = [int(num) for num in content.replace(' ', '').replace('\n', '').split(',') if num]
	print(numbers)

	file_latenze = open(sys.argv[2],'r')
	content_latenze = file_latenze.read()
	content_latenze = content_latenze[2:-2]
	latenze = [str(num) for num in content_latenze.replace(' ','').replace('\n','').split(',') if num]
	print(latenze)
# Data points for the histogram
#k = [   2,3,1,1,1,1,1,2,3,1,1,2,2,1,2,1,2,2,4,7,3,2,1,11,7,10,12,6,14,9,10,7,5,6,9,12,11,7,13,7,8,6,6,2,3,3,6,4,5,2,3,4,7,4,1,8,11,8,11,10,13,13,17,17,7,8,7,7,9,15,2,1,3,1,2,2,3,3,4,5,1,4,2,5,3,3,2,9,8,12,8,5,4,6,8,4,13,13,18,13,20,42,50,60,65,53,52,60,70,64,77,93,83,86,84,89,86,84,126,339,531,595,735,938,1136,1313,1487,1729,2061,2207,2408,2728,3033,3189,3310,3512,3501,3595,3897,4211,4686,4876,5014,4509,4002,3993,4388,4387,4127,4057,3930,7957,7856,7057,6656,6060,6101,5823,5882,5966,6276,6030,5838,5032,3789,3283,3033,2747,2726,2805,2401,2312,1982,1682,1588,1507,1474,1665,1611,1555,1515,1407,1449,2877,2417,2049,1594,1273,793,954,933,959,787,632,371,380,352,328,277,349,378,190,241,219,154,105,116,48,54,45,55,30,93,62,67,163,57,41,39,33,45,50,71,18,19,19,11,37,10,8,8,32,63,20,1,1,65,17,2,27,11,5,12,32,23,24,58,42,8,67,51,17,68,23,1,76,8,8]
	k = numbers
	#label = ["0.000036 - 0.000036","0.000037 - 0.000037","0.000039 - 0.000039","0.000040 - 0.000040","0.000041 - 0.000041","0.000042 - 0.000042","0.000043 - 0.000043","0.000044 - 0.000044","0.000045 - 0.000045","0.000046 - 0.000046","0.000047 - 0.000047","0.000048 - 0.000048","0.000050 - 0.000050","0.000051 - 0.000051","0.000052 - 0.000052","0.000053 - 0.000053","0.000054 - 0.000054","0.000055 - 0.000055","0.000058 - 0.000058","0.000059 - 0.000059","0.000060 - 0.000060","0.000062 - 0.000062","0.000063 - 0.000063","0.000064 - 0.000065","0.000066 - 0.000067","0.000068 - 0.000069","0.000070 - 0.000071","0.000072 - 0.000073","0.000074 - 0.000075","0.000076 - 0.000077","0.000078 - 0.000079","0.000080 - 0.000081","0.000082 - 0.000083","0.000084 - 0.000085","0.000086 - 0.000087","0.000088 - 0.000089","0.000090 - 0.000091","0.000092 - 0.000093","0.000094 - 0.000095","0.000096 - 0.000097","0.000098 - 0.000099","0.000100 - 0.000101","0.000102 - 0.000103","0.000104 - 0.000105","0.000106 - 0.000107","0.000108 - 0.000109","0.000110 - 0.000111","0.000112 - 0.000113","0.000114 - 0.000115","0.000116 - 0.000117","0.000118 - 0.000119","0.000120 - 0.000121","0.000122 - 0.000123","0.000124 - 0.000125","0.000126 - 0.000127","0.000128 - 0.000131","0.000132 - 0.000135","0.000136 - 0.000139","0.000140 - 0.000143","0.000144 - 0.000147","0.000148 - 0.000151","0.000152 - 0.000155","0.000156 - 0.000159","0.000160 - 0.000163","0.000164 - 0.000167","0.000168 - 0.000171","0.000172 - 0.000175","0.000176 - 0.000179","0.000180 - 0.000183","0.000184 - 0.000187","0.000188 - 0.000191","0.000192 - 0.000195","0.000196 - 0.000199","0.000200 - 0.000203","0.000204 - 0.000207","0.000208 - 0.000211","0.000212 - 0.000215","0.000216 - 0.000219","0.000220 - 0.000223","0.000224 - 0.000227","0.000228 - 0.000231","0.000232 - 0.000235","0.000236 - 0.000239","0.000240 - 0.000243","0.000244 - 0.000247","0.000248 - 0.000251","0.000252 - 0.000255","0.000256 - 0.000263","0.000264 - 0.000271","0.000272 - 0.000279","0.000280 - 0.000287","0.000288 - 0.000295","0.000296 - 0.000303","0.000304 - 0.000311","0.000312 - 0.000319","0.000320 - 0.000327","0.000328 - 0.000335","0.000336 - 0.000343","0.000344 - 0.000351","0.000352 - 0.000359","0.000360 - 0.000367","0.000368 - 0.000375","0.000376 - 0.000383","0.000384 - 0.000391","0.000392 - 0.000399","0.000400 - 0.000407","0.000408 - 0.000415","0.000416 - 0.000423","0.000424 - 0.000431","0.000432 - 0.000439","0.000440 - 0.000447","0.000448 - 0.000455","0.000456 - 0.000463","0.000464 - 0.000471","0.000472 - 0.000479","0.000480 - 0.000487","0.000488 - 0.000495","0.000496 - 0.000503","0.000504 - 0.000511","0.000512 - 0.000527","0.000528 - 0.000543","0.000544 - 0.000559","0.000560 - 0.000575","0.000576 - 0.000591","0.000592 - 0.000607","0.000608 - 0.000623","0.000624 - 0.000639","0.000640 - 0.000655","0.000656 - 0.000671","0.000672 - 0.000687","0.000688 - 0.000703","0.000704 - 0.000719","0.000720 - 0.000735","0.000736 - 0.000751","0.000752 - 0.000767","0.000768 - 0.000783","0.000784 - 0.000799","0.000800 - 0.000815","0.000816 - 0.000831","0.000832 - 0.000847","0.000848 - 0.000863","0.000864 - 0.000879","0.000880 - 0.000895","0.000896 - 0.000911","0.000912 - 0.000927","0.000928 - 0.000943","0.000944 - 0.000959","0.000960 - 0.000975","0.000976 - 0.000991","0.000992 - 0.001007","0.001008 - 0.001023","0.001024 - 0.001055","0.001056 - 0.001087","0.001088 - 0.001119","0.001120 - 0.001151","0.001152 - 0.001183","0.001184 - 0.001215","0.001216 - 0.001247","0.001248 - 0.001279","0.001280 - 0.001311","0.001312 - 0.001343","0.001344 - 0.001375","0.001376 - 0.001407","0.001408 - 0.001439","0.001440 - 0.001471","0.001472 - 0.001503","0.001504 - 0.001535","0.001536 - 0.001567","0.001568 - 0.001599","0.001600 - 0.001631","0.001632 - 0.001663","0.001664 - 0.001695","0.001696 - 0.001727","0.001728 - 0.001759","0.001760 - 0.001791","0.001792 - 0.001823","0.001824 - 0.001855","0.001856 - 0.001887","0.001888 - 0.001919","0.001920 - 0.001951","0.001952 - 0.001983","0.001984 - 0.002015","0.002016 - 0.002047","0.002048 - 0.002111","0.002112 - 0.002175","0.002176 - 0.002239","0.002240 - 0.002303","0.002304 - 0.002367","0.002368 - 0.002431","0.002432 - 0.002495","0.002496 - 0.002559","0.002560 - 0.002623","0.002624 - 0.002687","0.002688 - 0.002751","0.002752 - 0.002815","0.002816 - 0.002879","0.002880 - 0.002943","0.002944 - 0.003007","0.003008 - 0.003071","0.003072 - 0.003135","0.003136 - 0.003199","0.003200 - 0.003263","0.003264 - 0.003327","0.003328 - 0.003391","0.003392 - 0.003455","0.003456 - 0.003519","0.003520 - 0.003583","0.003584 - 0.003647","0.003648 - 0.003711","0.003712 - 0.003775","0.003776 - 0.003839","0.003840 - 0.003903","0.003904 - 0.003967","0.003968 - 0.004031","0.004032 - 0.004095","0.004096 - 0.004223","0.004224 - 0.004351","0.004352 - 0.004479","0.004480 - 0.004607","0.004608 - 0.004735","0.004736 - 0.004863","0.004864 - 0.004991","0.004992 - 0.005119","0.005120 - 0.005247","0.005248 - 0.005375","0.005376 - 0.005503","0.005504 - 0.005631","0.005632 - 0.005759","0.005760 - 0.005887","0.006144 - 0.006271","0.006272 - 0.006399","0.006400 - 0.006527","0.006528 - 0.006655","0.006656 - 0.006783","0.006912 - 0.007039","0.007680 - 0.007807","0.007808 - 0.007935","0.007936 - 0.008063","0.008448 - 0.008703","0.008704 - 0.008959","0.009216 - 0.009471","0.009472 - 0.009727","0.009728 - 0.009983","0.010240 - 0.010495","0.010496 - 0.010751","0.010752 - 0.011007","0.011008 - 0.011263","0.011264 - 0.011519","0.012032 - 0.012287","0.012544 - 0.012799","0.016384 - 0.016895","0.016896 - 0.017407","0.018432 - 0.018943","0.018944 - 0.019455","0.019456 - 0.019967","0.019968 - 0.020479","0.020480 - 0.020991","0.020992 - 0.021503"]
	label = latenze
	print(k)
	print(latenze)
	print(len(k))
	print(len(latenze))
# Plot the histogram
	plt.bar(np.arange(len(label)), k, align='center')

	plt.xticks(np.arange(len(label)), label, rotation='vertical', fontsize=7)
# Save the histogram
# giving title to the plot
# BIND UDP 200000_40000
	plt.title("Latency Buckets di "+sys.argv[3])
	
	# giving X and Y labels
	plt.xlabel("Range di latenze")
	plt.ylabel("Numero di risposte")
#bindudp2000_4000.png
	plt.savefig(sys.argv[4])

# Display the plot
	plt.show()
